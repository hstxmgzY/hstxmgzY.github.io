# 第一章 数据的整理和描述

## 1.1 统计量和描述

**统计量**（Statistics）：是用于描述和总结数据的一组数值，包括平均数、中位数、众数、标准差等。

**描述性统计**（Descriptive Statistics）：主要是对数据进行整理、归纳和描述，通过统计量来概括数据的主要特征。常见的描述性统计方法包括计算均值、中位数、众数、标准差、方差、范围等。

---

### 1. 平均数与中位数

**中位值**（Median）和**平均数**（Mean）是两种常用的**集中趋势测量**方法。

#### 平均数（Mean）

**定义**：平均数是所有数据点的总和除以数据点的数量。它是数据的算术平均值。

**计算公式**：

\[ \text{平均数} = \frac{1}{n} \sum_{i=1}^{n} x_i \]



其中，\( x_i \) 是第 \( i \) 个数据点，\( n \) 是数据点的总数。

**优点**：



- 计算简单
- 反映数据的整体水平

**缺点**：



- 对极端值（离群值）非常敏感

#### 中位值（Median）

**定义**：中位数是将数据按大小顺序排列后，处于中间位置的数值。如果数据点数量为奇数，则中位数是中间那个数；如果数据点数量为偶数，则中位数是中间两个数的平均值。

**优点**：



- 对极端值不敏感，能够更好地反映数据的中心趋势

**缺点**：



- 在某些情况下（例如数据非常分散时）可能不如平均数提供的信息多

#### 平均数与中位数的区别

- **敏感度**：平均数对极端值非常敏感，而中位数则不受极端值影响。
- **适用性**：在数据分布较为对称时，平均数和中位数接近；在数据存在极端值或分布不对称时，中位数更能反映数据的中心趋势。
- **计算**：平均数通过求和后除以数量计算，而中位数通过排序找到中间位置的数值。

### 2. 组中值

$$
组中值 = \frac{1}{2}(组下限+ 组上限)
$$

+ 组中值通常用$x^*$表示

### 3. 百分位数（Percentiles）

**定义**：百分位数是将数据按升序排列后，将其分成100个相等的部分，其中第 \( p \) 个百分位数表示小于这个值的数据点占总数的 \( p\% \)。

**常见百分位数**：



- 第25百分位数（第一四分位数，Q1）
- 第50百分位数（中位数，Q2）
- 第75百分位数（第三四分位数，Q3）

**用途**：



- 用于描述数据的分布情况
- 帮助确定数据中的异常值

---

- 平均数适用于数据对称且无极端值的情况，反映数据的整体水平。
- 中位数适用于数据分布不对称或存在极端值的情况，更能反映数据的中心趋势。
- 百分位数用于描述数据在不同位置的值，可以帮助理解数据的分布。

---

方差（Variance）和标准差（Standard Deviation）是两种用来描述数据集**离散程度（分散程度）**的统计量。它们都能衡量数据点与均值之间的差异程度，但它们的计算方式和用途略有不同。

### 4. 方差与标准差

#### 方差（Variance）

**定义**：方差是数据点与均值之间的平方差的平均值。它表示数据分布的离散程度。

**计算公式**：

- **样本方差**（Sample Variance）：
	- **定义**：样本方差是基于样本数据计算的方差，用于估计总体方差。
	- **分母为 n−1**：为了修正样本均值的偏差，我们在计算样本方差时使用 n−1而不是 n。这种修正被称为贝塞尔校正（Bessel's correction），它可以使样本方差成为总体方差的无偏估计。

\[ s^2 = \frac{1}{n-1} \sum_{i=1}^{n} (x_i - \bar{x})^2 \]

- **总体方差**（Population Variance）：
	- 定义：总体方差是基于整个总体数据计算的方差，描述总体数据的离散程度。
	- 用总体数量 𝑁作为分母，因为总体均值𝜇是已知的，没有偏差问题。

\[ \sigma^2 = \frac{1}{N} \sum_{i=1}^{N} (x_i - \mu)^2 \]

其中，\( x_i \) 是第 \( i \) 个数据点，\( \bar{x} \) 是样本均值，\( \mu \) 是总体均值，\( n \) 是样本数量，\( N \) 是总体数量。

**优点**：



- 方差能够精确量化数据的离散程度。

**缺点**：



- 由于平方的原因，单位变成了原数据单位的平方，这在实际解释中可能不太直观。

#### 标准差（Standard Deviation）

**定义**：标准差是方差的平方根。它和方差一样，用于表示数据的离散程度，但它的单位与原数据相同，更易于解释和理解。

**计算公式**：



- **样本标准差**（Sample Standard Deviation）：

\[ s = \sqrt{\frac{1}{n-1} \sum_{i=1}^{n} (x_i - \bar{x})^2} \]

- **总体标准差**（Population Standard Deviation）：

\[ \sigma = \sqrt{\frac{1}{N} \sum_{i=1}^{N} (x_i - \mu)^2} \]

**优点**：



- 标准差的单位与原数据相同，便于直观理解和解释。

#### 方差和标准差的区别和联系

- **联系**：标准差是方差的平方根，两者都用于描述数据的离散程度。
- **区别**：方差的单位是原数据单位的平方，而标准差的单位与原数据相同，更易于解释。

- **方差**量化数据点与均值之间的平方差的平均值，适合用于理论分析和建模。
- **标准差**是方差的平方根，具有与原数据相同的单位，更适合实际应用和解释。



### 4. 极差与四分位间距

极差和四分位数是两种常用的**描述数据分布范围和离散程度**的统计量。

#### **极差（Range）**

**定义**：极差是数据集中最大值与最小值之间的差值，用于描述数据的范围。

**计算公式**：

\[ \text{极差} = \text{最大值} - \text{最小值} \]

**特点**：



- 极差简单易算，直观地反映了数据的分布范围。
- 极差只依赖于两个数据点（最大值和最小值），对极端值（离群值）非常敏感，不能全面反映数据的离散程度。

---

#### **四分位数（Quartiles）**

**定义**：四分位数是将数据按升序排列后，分成四个相等部分，每部分包含数据总数的25%。它们分别是第一四分位数（Q1）、第二四分位数（Q2，即中位数）和第三四分位数（Q3）。

**计算四分位数的步骤**：

1. **将数据按升序排列**。
2. **计算位置**：
   - 第一四分位数（Q1）：将数据按顺序排列后，第25%的位置。
   - 第二四分位数（Q2）：中位数，数据的第50%位置。
   - 第三四分位数（Q3）：数据的第75%位置。

**公式**：

\[ Q1 = \left( \frac{n+1}{4} \right) \]

\[ Q2 = \left( \frac{2(n+1)}{4} \right) \]

\[ Q3 = \left( \frac{3(n+1)}{4} \right) \]

其中，\( n \) 是数据点的总数。

#### 四分位间距（Interquartile Range, IQR）

**定义**：四分位间距是**第三四分位数与第一四分位数**之间的差值，用于描述数据中间50%的分布范围，反映数据的离散程度。

**计算公式**：

\[ \text{四分位间距} = Q3 - Q1 \]

**特点**：
- 四分位间距不受极端值影响，更能反映数据的离散程度。
- 四分位间距可用于识别异常值。

#### 总结

- **极差**：描述数据的总体范围，计算简单，但对极端值敏感。
- **四分位数**：将数据分成四个部分，反映数据的分布特征。第一四分位数、第二四分位数（中位数）和第三四分位数分别代表数据在25%、50%和75%位置的值。
- **四分位间距**：描述数据中间50%的分布范围，不受极端值影响，适合用于反映数据的离散程度。

### 5. 五数总括（Five-Number Summary）

五数总括（Five-Number Summary）是一种描述数据集中分布情况的统计方法，通过五个关键位置的数值来总结数据的整体特征。五数总括包括以下五个数值：

1. **最小值（Minimum）**：数据集中最小的数值。
2. **第一四分位数（Q1）**：数据排序后位于25%位置的数值。
3. **中位数（Median, Q2）**：数据排序后位于50%位置的数值，即数据的中间值。
4. **第三四分位数（Q3）**：数据排序后位于75%位置的数值。
5. **最大值（Maximum）**：数据集中最大的数值。

**五数总括的用途**

- **描述数据分布**：五数总括提供了数据集的整体分布情况，包括数据的范围和集中趋势。
- **识别异常值**：通过五数总括可以容易地识别数据中的异常值。例如，可以通过第一四分位数和第三四分位数来计算四分位间距（IQR），然后通过IQR来确定异常值。
- **数据比较**：五数总括可以用于比较不同数据集的分布情况，特别是在绘制**箱线图**时。

### 6. 变异系数（Coefficient of Variation, CV）

变异系数（Coefficient of Variation, CV）是一种衡量数据集相对离散程度的统计量，用于比较不同数据集的离散程度，尤其是当数据集的均值不同且需要进行标准化比较时。变异系数定义为标准差与均值的比值，通常表示为百分比。

变异系数的计算公式为：

\[ CV = \frac{\sigma}{\mu} \times 100\% \]

其中：



- \( \sigma \) 是数据集的标准差
- \( \mu \) 是数据集的均值

**变异系数的用途**

1. **比较不同数据集的离散程度**：变异系数可以用于比较均值不同的两个或多个数据集的**离散程度**。较高的变异系数表示数据的相对离散程度较高，较低的变异系数表示数据的相对离散程度较低。
2. **评价数据的稳定性**：在某些应用中，如金融投资中，变异系数用于评价收益的稳定性或风险。较低的变异系数表示较高的稳定性或较低的风险。

变异系数提供了一种标准化的方式来比较不同数据集的离散程度，即使它们的均值不同。它在很多应用中非常有用，例如：



- **金融**：比较不同投资的风险
- **质量控制**：评估产品的一致性
- **生物统计**：比较不同实验条件下的生物测量数据

### 7. 相关系数（Correlation Coefficient）

相关系数（Correlation Coefficient）是一种统计量，用于度量两个变量之间**线性关系的强度和方向**。相关系数的值介于 -1 和 1 之间：

- 1 表示完全正相关（即两个变量完全同步变化）。
- -1 表示完全负相关（即一个变量增加时另一个变量完全减少）。
- 0 表示无线性相关（即两个变量之间没有线性关系）。

最常用的相关系数是皮尔逊相关系数（Pearson Correlation Coefficient），但还有其他类型的相关系数，如斯皮尔曼等级相关系数（Spearman Rank Correlation）和肯德尔相关系数（Kendall Tau Correlation）。

#### 皮尔逊相关系数

皮尔逊相关系数的计算公式为：



\[ r = \frac{\sum (x_i - \bar{x})(y_i - \bar{y})}{\sqrt{\sum (x_i - \bar{x})^2 \sum (y_i - \bar{y})^2}} \]

其中：



- \( x_i \) 和 \( y_i \) 是两个变量的第 \( i \) 个数据点。
- \( \bar{x} \) 和 \( \bar{y} \) 是两个变量的均值。



学生氏化（Studentization）是一种统计方法，用于标准化数据点，以便在不同的尺度上进行比较。通过学生氏化，可以将不同样本或观测值标准化，使其具有相同的尺度。这在许多统计分析和假设检验中非常有用，例如在进行t检验时。

### 8. 学生氏化

学生氏化的过程涉及将一个数据点减去其样本均值，然后除以样本标准差。通过这一过程，可以**消除数据集中的位置和尺度差异**，使不同数据点具有可比性。

学生氏化后的值称为**学生化残差或标准化残差**，其计算公式如下：



\[ t_i = \frac{x_i - \bar{x}}{s} \]

其中：



- \( x_i \) 是第 \( i \) 个数据点。
- \( \bar{x} \) 是样本均值。
- \( s \) 是**样本**标准差。



**应用**



1. **假设检验**：在t检验中，学生氏化用于标准化样本均值的差异，以评估其显著性。
2. **回归分析**：在回归分析中，学生氏化残差用于诊断异常值和评估模型拟合的质量。
3. **比较不同样本**：学生氏化可以标准化不同样本，使其具有可比性，便于进行比较分析。



学生氏化是统计分析中重要的一步，通过将数据点标准化，可以消除位置和尺度差异，使得不同数据点具有相同的尺度，便于比较和分析。这一过程在许多统计方法中广泛应用，如t检验、回归分析和异常值检测等。



## 1.2 数据整理图

### 1. 茎叶图

茎叶图（Stem-and-Leaf Plot）是一种简洁的统计图表，用于**显示一组数据的分布情况**。它通过将数据分割成“茎”和“叶”两部分，使得每个数据点在图中都有独立的显示，从而保留了原始数据的信息。茎叶图适合于处理较小规模的数据集，能够直观地展示数据的集中趋势和离散程度。

茎叶图的构造步骤如下：

1. **确定茎和叶**：
   - 将数据集的每个数据点分成两部分：茎（Stem）和叶（Leaf）。
   - 茎通常是数据点的前几位数字，叶是数据点的最后一位数字。例如，对于数据点43，茎是4，叶是3。

2. **绘制茎部分**：
   - 将所有不同的茎值列成一列，从最小值到最大值依次排列。

3. **绘制叶部分**：
   - 对于每个茎值，将对应的叶值排列在茎的右侧。
   - 多个相同的茎值按大小顺序排列叶值。

#### 茎叶图示例

假设我们有以下一组数据：
34, 36, 37, 42, 45, 45, 47, 51, 53, 53, 55, 61, 64, 67, 68, 70, 72, 73, 75

**步骤1：确定茎和叶**

将数据点分为茎和叶：
- 34 -> 茎：3，叶：4
- 36 -> 茎：3，叶：6
- 37 -> 茎：3，叶：7
- 42 -> 茎：4，叶：2
- 45 -> 茎：4，叶：5
- 45 -> 茎：4，叶：5
- 47 -> 茎：4，叶：7
- 51 -> 茎：5，叶：1
- 53 -> 茎：5，叶：3
- 53 -> 茎：5，叶：3
- 55 -> 茎：5，叶：5
- 61 -> 茎：6，叶：1
- 64 -> 茎：6，叶：4
- 67 -> 茎：6，叶：7
- 68 -> 茎：6，叶：8
- 70 -> 茎：7，叶：0
- 72 -> 茎：7，叶：2
- 73 -> 茎：7，叶：3
- 75 -> 茎：7，叶：5

**步骤2：绘制茎部分**

```
3 |
4 |
5 |
6 |
7 |
```

**步骤3：绘制叶部分**

```
3 | 4 6 7
4 | 2 5 5 7
5 | 1 3 3 5
6 | 1 4 7 8
7 | 0 2 3 5
```

#### 茎叶图的用途和优点

1. **数据分布展示**：茎叶图展示数据的集中趋势和分布情况，可以直观地看到数据的分布模式。
2. **保留原始数据**：每个数据点都在图中单独显示，保留了原始数据的信息。
3. **简单易读**：构造和理解茎叶图相对简单，适用于小型数据集。

#### 茎叶图的局限性

1. **适用范围有限**：茎叶图适用于较小的数据集，对于大型数据集，图表可能会变得杂乱。
2. **数据精度**：茎叶图通常用于整数数据或小数位数有限的数据，对于高精度数据，可能需要调整分组方式。



### 2. 盒型图（箱线图）

盒型图（Box Plot），也称为箱线图（Box-and-Whisker Plot），是一种用于显示数据集中趋势和分散程度的统计图表。盒型图能够直观地展示数据的中位数、四分位数和异常值，特别适用于比较多个数据集的分布。

#### 盒型图的构造元素

盒型图主要由以下几个部分构成：

1. **中位数（Median）**：数据集的中位数，用一条线表示，位于盒子的中间位置。
2. **四分位数（Quartiles）**：
	- **第一四分位数（Q1）**：数据集下四分位数，即数据中25%的位置。
	- **第三四分位数（Q3）**：数据集上四分位数，即数据中75%的位置。
3. **四分位距（Interquartile Range, IQR）**：Q3与Q1之间的距离，用于衡量数据的变异性。

\[ IQR = Q3 - Q1 \]

4. **须（Whiskers）**：须通常延伸到1.5倍的IQR之外，用于表示数据的范围。超出须的数据点被视为异常值。
5. **异常值（Outliers）**：超出须范围之外的数据点，用单独的标记表示。

#### 盒型图的绘制步骤

1. **计算关键统计量**：
	- 中位数（Q2）
	- 第一四分位数（Q1）
	- 第三四分位数（Q3）
	- 最小值和最大值（非异常值）
2. **绘制盒子**：
	- 盒子的下边缘表示Q1，上边缘表示Q3。
	- 盒子内部的线表示中位数。
3. **绘制须**：
	- 下须从Q1延伸到最低的非异常值数据点，通常为Q1 - 1.5 \* IQR。
	- 上须从Q3延伸到最高的非异常值数据点，通常为Q3 + 1.5 \* IQR。
4. **标记异常值**：
	- 异常值在须之外，单独用点或其他符号表示。

#### 盒型图的用途和优点

1. **数据分布展示**：盒型图能够直观地展示数据的分布情况，包括中位数、四分位数和异常值。
2. **比较多个数据集**：盒型图适用于比较多个数据集的分布差异，尤其是中位数和四分位数的差异。
3. **异常值检测**：盒型图能够有效地识别和显示数据集中的异常值。

#### 盒型图的局限性

1. **数据量要求**：对于数据量过小的数据集，盒型图的效果可能不明显。
2. **详细信息缺乏**：盒型图虽然能够显示数据的整体分布，但对于数据的具体形态（如多峰分布）无法详细展示。



盒型图是一种强大的工具，通过展示数据的中位数、四分位数、四分位距和异常值，可以直观地了解数据集的分布和离散程度。它在比较**多个数据集和识别异常值**方面特别有用。
